{% extends "templates/trame.html.twig" %}

{% block style %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ lib_url('bootstrap-select-1.13.9/dist/css/bootstrap-select.css') }}">

{% endblock %}

{% block contenu %}
<div class="row justify-content-md-center">
    <div id="loginbox" class="col-md-8">                    
        <div class="card mb-5 mt-3">
            <div class="card-header text-white bg_ffck_primary">
                <h4>{{ lang('edit_user_heading') }}</h4>
            </div>     

            <div class="card-body" >
                <div id="infoMessage">{{ message |raw }}</div>
                    
                {{ form_open("auth/edit_user/".user.id, 'role="form" class="form-horizontal row"') }}

                    <div class="col-6">
                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_Identity'), '', 'class="col-sm-3 col-form-label"') }}
                            <div class="col-sm-4">
                                {{ form_input(identity) }}
                            </div>
                        </div>
                        
                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_First_name'), '', 'class="col-sm-3 col-form-label"') }}
                            <div class="col-sm-9">
                                {{ form_input(first_name) }}
                            </div>
                        </div>

                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_Last_name'), '', 'class="col-sm-3 col-form-label"') }}
                            <div class="col-sm-9">
                                {{ form_input(last_name) }}
                            </div>
                        </div>

                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_Company'), '', 'class="col-sm-3 col-form-label"') }}
                            <div class="col-sm-9">
                                {{ form_input(company) }}
                            </div>
                        </div>

                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_Email'), '', 'class="col-sm-3 col-form-label"') }}
                            <div class="col-sm-9">
                                {{ form_input(email) }}
                            </div>
                        </div>

                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_Phone'), '', 'class="col-sm-3 col-form-label"') }}
                            <div class="col-sm-9">
                                {{ form_input(phone) }}
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_Seasons'), '', 'class="col-sm-3 col-form-label"') }}
                            <div class="col-sm-9">
                                {{ form_selectpicker(seasons, false, false, 'multiple') }}
                            </div>
                        </div>

                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_Compets'), '', 'class="col-sm-3 col-form-label"') }}
                            <div class="col-sm-9">
                                {{ form_selectpicker2(compets, false, false, 'multiple  data-live-search="true"') }}
                            </div>
                        </div>

                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_Phases'), '', 'class="col-sm-3 col-form-label"') }}
                            <div class="col-sm-9">
                                {{ form_input(phases) }}
                            </div>
                        </div>

                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_Clubs'), '', 'class="col-sm-3 col-form-label"') }}
                            <div class="col-sm-9">
                                {{ form_selectpicker2(clubs, false, false, 'multiple  data-live-search="true"') }}
                            </div>
                        </div>

                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_Password'), '', 'class="col-sm-4 col-form-label"') }}
                            <div class="col-sm-8">
                                {{ form_input(password) }}
                            </div>
                        </div>

                        <div class="form-group row">
                            {{ form_label(lang('kpi_login_Password_confirm'), '', 'class="col-sm-4 col-form-label"') }}
                            <div class="col-sm-8">
                                {{ form_input(password_confirm) }}
                            </div>
                        </div>

                        {% if in_group([1,20]) %}
                            <div class="form-group row">
                                {{ form_label(lang('edit_user_groups_heading'), '', 'class="col-sm-4 col-form-label"') }}
                                <div class="col-sm-8">
                                    <select name="groups[]" id="groups" class="selectpicker">
                                        {% for group in groups %}
                                            {% set selected = '' %}
                                            {% for grp in currentGroups %}
                                                {% if group.id == grp.id %}
                                                    {% set selected = ' selected="selected"' %}
                                                {% endif %}
                                            {% endfor %}
                                            <option value="{{ group.id }}" title="{{ group.description }}" {{ selected }}>{{ group.description }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                    <div class="col-12">
                        <hr>
                        <div class="row justify-content-between mt-3">
                            <!-- Button -->
                            <div class="col-4">
                                <a href="{{ site_url('auth/user_list') }}" class="btn btn-secondary">{{ lang('kpi_Retour') }}</a>
                            </div>
                            <div class="col-4 text-right">
                                {{ form_submit('submit', lang('edit_user_submit_btn'), 'class="btn btn-primary"') }}
                            </div>
                        </div>
                    </div>
                    {{ form_hidden('id', user.id) }}
                    {{ form_hidden(csrf) }}

                {{ form_close() }}     

            </div>                     
        </div>  
    </div>  
</div>
<br>
<br>
<br>
{% endblock %}

{% block javascript %}
    {{ parent() }}
    <script src="{{ lib_url('bootstrap-select-1.13.9/dist/js/bootstrap-select.js') }}"></script>
    <script src="{{ lib_url('bootstrap-select-1.13.9/dist/js/i18n/defaults-' ~ i18n ~ '.min.js') }}"></script>
{% endblock %}
